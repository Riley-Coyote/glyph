<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Glyph Suite | Advanced Unicode Steganography Tools</title>
    
    <meta name="description" content="Unlock the power of Unicode steganography with Glyph Suite. Encode, decode, and analyze hidden messages with advanced tools. Perfect for stealth communication and digital privacy.">
    <meta name="keywords" content="Unicode, steganography, hidden messages, covert communication, character analysis, message encoding, privacy, security, glyph, glyph suite, unicode tools, text analysis, data hiding">
    <meta name="author" content="GlyphSuite.com">
    <meta name="robots" content="index, follow">
    
    <meta property="og:title" content="Glyph Suite | Advanced Unicode Steganography">
    <meta property="og:description" content="Encode, decode, and analyze hidden messages with Glyph Suite's advanced Unicode steganography tools. Explore the unseen layers of text.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.glyphsuite.com"> <!-- Placeholder URL -->
    <meta property="og:image" content="/api/placeholder/1200/630">
    <meta property="og:image:alt" content="Glyph Suite Logo and Interface Preview">
    <meta property="og:site_name" content="Glyph Suite">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Glyph Suite | Advanced Unicode Steganography">
    <meta name="twitter:description" content="Encode, decode, and analyze hidden messages with Glyph Suite's advanced Unicode steganography tools.">
    <meta name="twitter:image" content="/api/placeholder/1200/630">
    
    <link rel="icon" href="/api/placeholder/32/32" sizes="any"> <!-- Placeholder favicon -->
    <link rel="apple-touch-icon" href="/api/placeholder/180/180">
    <!-- <link rel="manifest" href="/site.webmanifest"> --> <!-- Manifest would be a separate file -->
    
    <meta name="theme-color" content="#0a0a12">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Glyph Suite">
    <meta name="application-name" content="Glyph Suite">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=JetBrains+Mono:wght@300;400;700&display=swap');
        
        @property --angle {
          syntax: '<angle>';
          initial-value: 0deg;
          inherits: false;
        }

        :root {
            --main-bg: #0a0a12;
            --terminal-bg: #121212;
            --panel-bg: #1a1a1a;
            --card-bg: #101010;
            --border-color: #333333;
            --text-color: #b0b0b0;
            --active-color: #e0e0e0;
            --highlight-color: #F97316; /* Orange Amber */
            --secondary-highlight-color: #D06010; /* Darker Orange Amber for gradients */
            --glow-color: rgba(249, 115, 22, 0.25); /* Glow based on Orange Amber */
            --warm-light-color: rgba(255, 245, 220, 0.6); /* Natural warm light for trail */
            --dim-text: #666666;
            --success-color: #999999; 
            --success-border-color: #555555; 
            --success-bg-color: rgba(120,120,120,0.1); 
            --error-color: #AAAAAA;   
            --error-border-color: #666666; 
            --error-bg-color: rgba(130,130,130,0.1); 
            --info-bg: rgba(249, 115, 22, 0.08); 
            --char-bg: #1f1f1f;
            --char-border: #2c2c2c;
            --found-bg: rgba(249, 115, 22, 0.1); 
            --found-border: var(--highlight-color); 
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'JetBrains Mono', 'Share Tech Mono', monospace;
            line-height: 1.7; background-color: var(--main-bg); color: var(--text-color);
            padding: 0; margin: 0;
            background-image: 
                radial-gradient(circle at 25px 25px, rgba(249, 115, 22, 0.02) 1px, transparent 0), 
                radial-gradient(circle at 75px 75px, rgba(120, 120, 120, 0.01) 1px, transparent 0); 
            background-size: 100px 100px; position: relative; min-height: 100vh; overflow-x: hidden;
        }
        
        body::before { /* Subtle vignette */
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 50%, rgba(0,0,0,0.3) 100%);
            pointer-events: none; z-index: -1;
        }
        
        .container { max-width: 1100px; margin: 0 auto; padding: 20px; position: relative; }
        
        header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 25px 0; border-bottom: 1px solid var(--border-color); margin-bottom: 35px;
        }
        
        .logo { display: flex; align-items: center; }
        .logo h1 { font-size: 2rem; font-weight: 700; color: var(--active-color); letter-spacing: 2px; text-shadow: 0 0 12px var(--glow-color); }
        .logo-icon { margin-right: 15px; font-size: 1.8rem; color: var(--highlight-color); text-shadow: 0 0 10px var(--glow-color); }
        .tag-line { font-size: 0.95rem; color: var(--dim-text); margin-left: 20px; }
        
        h1, h2, h3 { color: var(--active-color); font-weight: 400; }
        h2 { font-size: 1.4rem; margin-bottom: 20px; display: flex; align-items: center; }
        h2 i { margin-right: 12px; color: var(--highlight-color); }
        h3 { font-size: 1.1rem; margin-top: 30px; margin-bottom: 18px; display: flex; align-items: center; }
        h3 i { margin-right: 10px; color: var(--active-color); }
        
        .header-main { text-align: center; margin-bottom: 50px; }
        .header-main h1 { font-size: 2.5rem; color: var(--active-color); margin-bottom: 15px; }
        .header-main p { color: var(--text-color); font-size: 1.1rem; max-width: 750px; margin: 0 auto; }
        
        .card-container { display: flex; flex-wrap: wrap; gap: 25px; margin-top: 35px; }
        .card {
            flex: 1; min-width: 320px; background-color: var(--card-bg);
            border: 1px solid var(--border-color); border-radius: 6px; padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.25);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative; overflow: hidden;
        }
        /* Removed old .card::before for glow */
        .card:hover { 
            transform: translateY(-6px); 
            box-shadow: 0 8px 20px rgba(0,0,0,0.3); /* Keep subtle shadow lift */
        }
        .card h2 { color: var(--active-color); margin-top: 0; font-size: 1.3rem; }
        .card-icon { margin-right: 15px; font-size: 1.6rem; color: var(--highlight-color); }
        .card p { margin: 18px 0; font-size: 0.95rem; }
        .card ul { margin: 18px 0; padding-left: 20px; list-style-type: none; }
        .card ul li { position: relative; padding-left: 18px; margin-bottom: 10px; }
        .card ul li::before { content: "✓"; position: absolute; left: 0; color: var(--highlight-color); }
        
        .btn { 
            display: inline-block; background: linear-gradient(45deg, var(--highlight-color), var(--secondary-highlight-color));
            color: #FFFFFF; text-decoration: none; padding: 12px 24px;
            border: none; border-radius: 4px; margin-top: 25px;
            transition: all 0.3s ease; font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem; display: inline-flex; align-items: center; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 15px var(--glow-color), 0 0 20px var(--glow-color); }
        .btn i { margin-right: 10px; }

        .panel, .info-panel, .decoder-section { /* Grouped for consistent styling including new hover */
            background-color: var(--panel-bg); border: 1px solid var(--border-color);
            border-radius: 6px; padding: 25px; margin-bottom: 35px;
            position: relative; overflow: hidden;
        }
        .info-panel { background-color: var(--info-bg); border-left: 4px solid var(--highlight-color); }
        .decoder-section { background-color: var(--panel-bg); border-left: 4px solid var(--border-color); }

        .panel::before { /* Static top highlight for .panel only */
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, var(--highlight-color), transparent);
            opacity: 0.3;
        }
        
        /* New Animated Light Trail for .card, .panel, .info-panel, .decoder-section */
        .card::after, .panel::after, .info-panel::after, .decoder-section::after {
          content: "";
          position: absolute;
          top: -2px; left: -2px; /* Position slightly outside to cover original border */
          width: calc(100% + 4px);
          height: calc(100% + 4px);
          border-radius: inherit; 
          
          border: 2px solid transparent; /* This border will take the image */
          border-image-slice: 1;
          
          opacity: 0;
          transition: opacity 0.4s ease-in-out; /* Smooth fade-in/out of trail */
          pointer-events: none; 
          z-index: 0; 
        }

        .card:hover::after, .panel:hover::after, .info-panel:hover::after, .decoder-section:hover::after {
          opacity: 1;
          /* A short, bright segment for the "whip" effect */
          border-image-source: conic-gradient(from var(--angle), 
            transparent 0%, 
            transparent 45%, 
            var(--warm-light-color) 50%, 
            transparent 55%, 
            transparent 100%
          );
          animation: spinAngle 1.5s linear infinite;
        }

        @keyframes spinAngle {
          to {
            --angle: 360deg;
          }
        }
        
        textarea {
            width: 100%; min-height: 160px; padding: 15px; margin-bottom: 20px;
            font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;
            background-color: var(--terminal-bg); color: var(--active-color);
            border: 1px solid var(--border-color); border-radius: 4px; resize: vertical;
            caret-color: var(--highlight-color);
        }
        textarea:focus { outline: none; border-color: var(--highlight-color); box-shadow: 0 0 10px var(--glow-color); }
        
        button { 
            background-color: var(--terminal-bg); color: var(--active-color);
            border: 1px solid var(--border-color); border-radius: 4px;
            padding: 10px 20px; font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem; cursor: pointer; margin-right: 10px; margin-bottom: 15px;
            transition: all 0.2s ease; display: inline-flex; align-items: center;
        }
        button:hover { background-color: var(--highlight-color); color: #FFFFFF; border-color: var(--highlight-color); box-shadow: 0 0 8px var(--glow-color); }
        button:active { transform: translateY(1px); }
        button:disabled { opacity: 0.5; cursor: not-allowed; background-color: var(--terminal-bg); color: var(--dim-text); border-color: var(--border-color); }
        button:disabled:hover { box-shadow: none; background-color: var(--terminal-bg); color: var(--dim-text); } 
        button i { margin-right: 8px; }
        
        .result {
            background-color: var(--terminal-bg); color: var(--active-color);
            padding: 20px; border: 1px solid var(--border-color); border-radius: 4px;
            margin-bottom: 25px; font-family: 'Share Tech Mono', monospace;
            white-space: pre-wrap; word-wrap: break-word; max-height: 350px;
            overflow-y: auto; position: relative; line-height: 1.8;
        }
        .result::before {
            content: "Output Stream"; position: absolute; top: -12px; left: 15px;
            background-color: var(--terminal-bg); padding: 2px 8px; font-size: 0.8rem;
            color: var(--dim-text); border-radius: 3px; border: 1px solid var(--border-color);
        }
        
        .info-panel .terminal-line { color: var(--active-color); }
        .info-panel .terminal-line::before { color: var(--highlight-color); content: ">"; }
        
        .terminal-line { position: relative; padding-left: 20px; margin-bottom: 12px; font-size: 0.9rem; }
        .terminal-line::before { content: "$"; position: absolute; left: 0; color: var(--highlight-color); }
        
        .char-info-container { line-height: 2; }
        .char-info-item {
            position: relative; display: inline-block;
            padding: 0 2px; margin: 0 1px; border-radius: 2px;
            cursor: default;
        }
        .char-info-item.special {
            background-color: rgba(249, 115, 22, 0.1); 
            border: 1px solid var(--highlight-color);
        }
        .char-info-item:hover .tooltip { display: block; }
        .tooltip {
            display: none; position: absolute; bottom: 125%; left: 50%;
            transform: translateX(-50%); padding: 8px 12px;
            background-color: var(--char-bg); color: var(--active-color);
            border-radius: 4px; font-size: 0.8rem; white-space: nowrap;
            z-index: 10; border: 1px solid var(--border-color);
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
        .char-code {
            font-size: 0.75em; color: var(--dim-text); margin: 0 1px;
            background-color: var(--char-bg); padding: 1px 3px; border-radius: 2px;
        }
        .char-code .ascii-mapping { 
            color: var(--highlight-color); 
            font-style: italic;
        }
        
        .stats {
            margin: 20px 0; font-size: 0.9rem; color: var(--text-color);
            background-color: var(--panel-bg); padding: 15px 20px; 
            border-radius: 4px; border-left: 3px solid var(--border-color);
        }
        
        .method-info {
            display: none; margin-top: 20px; padding: 18px;
            background-color: var(--info-bg); border-left: 3px solid var(--highlight-color);
            font-size: 0.9rem; border-radius: 4px;
        }
        .method-info strong { color: var(--active-color); }
        .method-info code { background-color: var(--terminal-bg); border-color: var(--border-color); }
        
        select {
            padding: 12px 15px; border-radius: 4px; border: 1px solid var(--border-color);
            background-color: var(--terminal-bg); color: var(--active-color);
            font-family: 'JetBrains Mono', monospace; margin: 10px 0 20px 0;
            width: 100%; max-width: 500px; font-size: 0.9rem; appearance: none; -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23b0b0b0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); 
            background-repeat: no-repeat; background-position: right 12px center; background-size: 18px;
        }
        select:focus { outline: none; border-color: var(--highlight-color); box-shadow: 0 0 10px var(--glow-color); }
        
        .tabs { display: flex; margin-bottom: 25px; border-bottom: 1px solid var(--border-color); }
        .tab-btn {
            background-color: transparent; color: var(--text-color);
            border: 1px solid transparent; border-bottom: none;
            padding: 12px 22px; cursor: pointer; transition: all 0.2s ease;
            margin-right: 8px; margin-bottom: -1px; border-radius: 4px 4px 0 0; font-size: 0.9rem;
        }
        .tab-btn.active { background-color: var(--panel-bg); color: var(--highlight-color); border-color: var(--border-color); border-bottom-color: var(--panel-bg); } 
        .tab-btn:not(.active):hover { color: var(--active-color); background-color: rgba(255,255,255,0.03); }
        .tab-content { display: none; padding: 25px 5px; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        
        .step-number {
            display: inline-flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; background-color: var(--terminal-bg);
            border: 1px solid var(--border-color); border-radius: 50%;
            margin-right: 12px; font-size: 0.9rem; color: var(--active-color); font-weight: bold;
        }
        
        .category-label {
            font-size: 0.8rem; color: var(--dim-text); margin-left: 8px;
            background-color: var(--char-bg); padding: 2px 5px; border-radius: 3px;
        }
        
        .nav-links { margin-bottom: 25px; }
        .nav-links a {
            margin-right: 20px; color: var(--text-color); text-decoration: none;
            font-size: 0.95rem; padding: 8px 4px; position: relative; cursor: pointer;
            transition: color 0.2s ease;
        }
        .nav-links a:hover { color: var(--active-color); }
        .nav-links a.active { color: var(--highlight-color); font-weight: bold; }
        .nav-links a.active::after {
            content: ""; position: absolute; bottom: -2px; left: 0;
            width: 100%; height: 2px;
            animation: gradientMove 6s ease infinite;
            background-image: linear-gradient(45deg, var(--highlight-color), var(--secondary-highlight-color), var(--highlight-color));
            background-size: 200% 200%;
        }
        
        .feedback-message { padding: 10px 15px; border-radius: 4px; margin-top: 10px; font-size: 0.9rem; display: flex; align-items: center; }
        .feedback-message.success { color: var(--success-color); background-color: var(--success-bg-color); border-left: 4px solid var(--success-border-color); }
        .feedback-message.error { color: var(--error-color); background-color: var(--error-bg-color); border-left: 4px solid var(--error-border-color); }
        .feedback-message i { margin-right: 10px; color: inherit; } 

        .message-found {
            margin-bottom: 20px; padding: 18px; background-color: var(--found-bg); 
            border-left: 3px solid var(--found-border); border-radius: 4px;
        }
        .message-found .category { 
            color: var(--highlight-color); font-size: 0.85em; margin-bottom: 5px; display: block;
            background: linear-gradient(90deg, var(--highlight-color), var(--secondary-highlight-color));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; text-fill-color: transparent;
        }
        .message-found pre {
            background-color: var(--main-bg); padding: 12px; border-radius: 4px; margin: 12px 0;
            overflow-x: auto; color: var(--active-color); border: 1px solid var(--border-color);
        }
        
        .resources-list { list-style-type: none; padding-left: 5px; }
        .resources-list li { margin-bottom: 12px; position: relative; padding-left: 30px; }
        .resources-list li::before { content: "🔗"; position: absolute; left: 0; color: var(--highlight-color); font-size: 1rem; }
        .resources-list li a { color: var(--text-color); text-decoration: none; transition: color 0.2s; }
        .resources-list li a:hover { color: var(--highlight-color); text-decoration: underline; }
        
        code { 
            background-color: var(--char-bg); padding: 3px 6px; border-radius: 3px;
            font-family: 'Share Tech Mono', monospace; color: var(--active-color);
            word-break: break-all; border: 1px solid var(--border-color);
        }
        
        .footer {
            margin-top: 60px; padding: 30px 20px; border-top: 1px solid var(--border-color);
            color: var(--dim-text); font-size: 0.85rem; text-align: center;
        }
        .footer p { margin: 5px 0; }
        .footer a { color: var(--text-color); text-decoration: none; }
        .footer a:hover { color: var(--highlight-color); text-decoration: underline; }
        
        .decoder-section {
            margin-top: 35px; padding: 20px; /* background-color set with .panel styles */
            border-radius: 4px; /* border-left set with .panel styles */
        }
        .decoder-section p { margin-bottom: 12px; }
        .decoder-section ol, .decoder-section ul { padding-left: 25px; margin-bottom: 12px; }
        .decoder-section li { margin-bottom: 8px; }
        .decoder-section strong { color: var(--active-color); }
        
        .matrix-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; opacity: 0.05; z-index: -2;
        }
        
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s ease-in-out; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        
        .cursor::after {
            content: "_"; color: var(--highlight-color);
            animation: blink 1s infinite; margin-left: 3px; font-weight: bold;
        }

        .delimiter-presets-container { display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0; }
        .delimiter-preset-btn {
            padding: 8px 12px; background-color: var(--terminal-bg); color: var(--text-color);
            border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer;
            transition: all 0.2s ease; font-size: 0.85rem;
        }
        .delimiter-preset-btn:hover { border-color: var(--highlight-color); color: var(--active-color); }
        .delimiter-preset-btn.selected {
            border-color: var(--highlight-color); background-color: var(--info-bg); 
            box-shadow: 0 0 8px var(--glow-color); color: var(--active-color);
        }
        .delimiter-preset-btn .name { font-weight: bold; }
        .delimiter-preset-btn .symbols { color: var(--highlight-color); margin-right: 5px; }

        .custom-delimiters-group { margin-top: 15px; }
        .custom-delimiters-group input[type="text"] {
            padding: 10px; background-color: var(--terminal-bg); color: var(--active-color);
            border: 1px solid var(--border-color); border-radius: 4px; margin-right: 10px;
            font-family: 'JetBrains Mono', monospace; width: calc(50% - 10px);
        }
        .custom-delimiters-group input[type="text"]:focus { border-color: var(--highlight-color); }
        
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: var(--terminal-bg); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--highlight-color); }
        
        @media (max-width: 768px) {
            .container { padding: 15px; }
            header { flex-direction: column; align-items: flex-start; gap: 15px; }
            .logo h1 { font-size: 1.6rem; } .logo-icon { font-size: 1.4rem; }
            .nav-links { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
            .nav-links a { margin-right: 10px; font-size: 0.9rem; }
            .card-container { gap: 20px; } .card { min-width: 100%; padding: 20px; }
            .panel, .info-panel, .decoder-section { padding: 20px; }
            button, .btn { padding: 10px 18px; font-size: 0.85rem; }
            select { font-size: 0.85rem; }
            .header-main h1 { font-size: 2rem; } .header-main p { font-size: 1rem; }
            .custom-delimiters-group input[type="text"] { width: 100%; margin-bottom: 10px; }
        }
        @media (max-width: 480px) {
            .tag-line { display: none; }
            .tabs { flex-direction: column; }
            .tab-btn { margin-right: 0; margin-bottom: 2px; border-radius: 4px; }
            .tab-btn.active { border-bottom-color: var(--border-color); }
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas" class="matrix-effect"></canvas>
    
    <div class="container">
        <header>
            <div class="logo">
                <span class="logo-icon"><i class="fas fa-ghost"></i></span>
                <h1>GLYPH SUITE</h1>
                <span class="tag-line" id="tagLine">// Official Unicode Toolkit</span>
            </div>
        </header>
        
        <nav class="nav-links">
            <a onclick="showSection('home-section')" id="homeLink" class="active">Home</a>
            <a onclick="showSection('analyzer-section')" id="analyzerLink">Analyzer</a>
            <a onclick="showSection('encoder-section')" id="encoderLink">Encoder</a>
        </nav>

        <section id="home-section" class="section active">
            <div class="info-panel">
                <div class="terminal-line">SYSTEM: Glyph Suite Kernel v4.1 initialized.</div>
                <div class="terminal-line">PROTOCOL: Advanced Unicode Steganography (AUS-ECC) active.</div>
                <div class="terminal-line">STATUS: <span class="cursor">Online & Ready</span></div>
            </div>
            <div class="header-main">
                <h1>Welcome to Glyph Suite</h1>
                <p>The definitive toolkit for exploring Unicode steganography. Encode, decode, and analyze hidden messages with unparalleled precision and control.</p>
            </div>
            <div class="card-container">
                <div class="card">
                    <h2><span class="card-icon"><i class="fas fa-search-plus"></i></span>Character Analyzer</h2>
                    <p>Dissect text to reveal hidden Unicode characters, invisible markers, and detailed code point information.</p>
                    <ul>
                        <li>Detect zero-width and non-rendering characters</li>
                        <li>Visualize character metadata and properties</li>
                        <li>Attempt extraction of concealed messages</li>
                    </ul>
                    <a class="btn" onclick="showSection('analyzer-section'); document.getElementById('analyzerLink').click();"><i class="fas fa-terminal"></i>Launch Analyzer</a>
                </div>
                <div class="card">
                    <h2><span class="card-icon"><i class="fas fa-key"></i></span>Message Encoder</h2>
                    <p>Embed secret messages within text using sophisticated Unicode steganography techniques.</p>
                    <ul>
                        <li>Multiple encoding vectors for varied applications</li>
                        <li>Generate completely invisible payloads</li>
                        <li>Craft deployment-ready steganographic text</li>
                    </ul>
                    <a class="btn" onclick="showSection('encoder-section'); document.getElementById('encoderLink').click();"><i class="fas fa-lock"></i>Launch Encoder</a>
                </div>
            </div>
            <div class="card-container" style="margin-top: 25px;">
                <div class="card" style="flex-basis: 100%;">
                    <h2><span class="card-icon"><i class="fas fa-info-circle"></i></span>About Unicode Steganography</h2>
                    <p>Unicode steganography is the art of concealing information within text by leveraging the vast and often underutilized characters within the Unicode standard. This technique primarily uses characters that are invisible, visually indistinguishable from others, or part of special-purpose blocks like Unicode Tags (U+E0000 to U+E007F).</p>
                    <p>Glyph Suite provides a comprehensive platform for both creating steganographic content and detecting its presence. All operations are performed client-side, ensuring your data never leaves your browser, guaranteeing maximum privacy and operational security.</p>
                </div>
            </div>
        </section>

        <section id="analyzer-section" class="section">
            <div class="info-panel">
                <div class="terminal-line">MODULE: Unicode Character Analyzer engaged.</div>
                <div class="terminal-line">SCAN MODE: Deep inspection (Tags, Surrogates, Special Chars).</div>
                <div class="terminal-line" id="analyzerStatus">STATUS: <span class="cursor">Awaiting Input</span></div>
            </div>
            <div class="panel">
                <h2><span class="step-number">01</span><i class="fas fa-file-import"></i>Input Text for Analysis</h2>
                <textarea id="analyzerInputText" placeholder="Paste or type text here to analyze for hidden Unicode characters..."></textarea>
                <button id="analyzeBtn"><i class="fas fa-search"></i>Analyze Text</button>
                <button id="loadSampleBtn"><i class="fas fa-vial"></i>Load Sample</button>
                <button id="clearAnalyzerBtn"><i class="fas fa-trash-alt"></i>Clear All</button>
            </div>
            <h2><i class="fas fa-microscope"></i>Character Stream Analysis</h2>
            <div id="analysisResult" class="result char-info-container">// Character-by-character breakdown will appear here.</div>
            <div id="statsResult" class="stats">// Analysis statistics will be shown here.</div>
            <h2><i class="fas fa-atom"></i>Detected Special Characters List</h2>
            <div id="charInfoList" class="result">// List of identified special Unicode characters.</div>
            <h2><i class="fas fa-key"></i>Message Operations</h2>
            <div class="tabs">
                <button class="tab-btn active" id="decodeTabBtn" onclick="switchAnalyzerTab('decodeTab')">Decode Message</button>
                <button class="tab-btn" id="encodeTabBtnQuick" onclick="switchAnalyzerTab('encodeTabQuick')">Quick Encode</button>
            </div>
            <div id="decodeTab" class="tab-content active">
                <h3><i class="fas fa-unlock-alt"></i>Extract Hidden Message</h3>
                <p>Attempt to decode hidden ASCII messages from the analyzed text using various steganographic vectors.</p>
                <button id="extractBtn"><i class="fas fa-magic"></i>Extract Message</button>
                <div id="decodedMessage" class="result">// Extracted message will appear here.</div>
            </div>
            <div id="encodeTabQuick" class="tab-content">
                <h3><i class="fas fa-pencil-alt"></i>Quick Encode Message</h3>
                <p>Enter a message to quickly encode using a selected Unicode steganography method:</p>
                <textarea id="messageToEncodeQuick" placeholder="Enter ASCII message to encode..."></textarea>
                <div>
                    <label for="encodingMethodQuick">Encoding Vector:</label>
                    <select id="encodingMethodQuick">
                        <option value="tag_chars">UNICODE_TAG [U+E0xxx Notation]</option>
                        <option value="surrogate_pairs_notation">SURROGATE_PAIR [Notation]</option>
                        <option value="actual_surrogates">PHANTOM_MODE [Invisible Surrogates]</option>
                        <option value="decorated">MARKED_PAYLOAD [Invisible + Delimiters]</option>
                    </select>
                </div>
                <div id="delimiterOptionsQuick" class="hidden">
                    <h4>Delimiter Options:</h4>
                    <div class="delimiter-presets-container" id="delimiterPresetsQuick"></div>
                    <label><input type="checkbox" id="customDelimitersCheckQuick"> Use custom delimiters</label>
                    <div id="customDelimitersQuick" class="custom-delimiters-group hidden">
                        <input type="text" id="openingDelimiterQuick" placeholder="Opening" maxlength="10">
                        <input type="text" id="closingDelimiterQuick" placeholder="Closing" maxlength="10">
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <button id="encodeBtnQuick"><i class="fas fa-bolt"></i>Encode Now</button>
                    <button id="copyEncodedBtnQuick" disabled><i class="fas fa-copy"></i>Copy Encoded</button>
                </div>
                <div id="encodedMessageQuick" class="result">// Quick encoded output will appear here.</div>
            </div>
            <div class="decoder-section">
                <h3><i class="fas fa-shield-alt"></i>Technical Deep Dive: Detection & Decoding</h3>
                <p>The Glyph Suite analyzer employs multiple strategies to detect and decode steganographic content:</p>
                <ol>
                    <li><strong>Direct Unicode Tag Characters:</strong> Identifies characters in the U+E0000 to U+E007F range and their `U+E0xxx` notation.</li>
                    <li><strong>UTF-16 Surrogate Pairs:</strong> Detects specific surrogate pairs (U+DB40 + U+DC00-U+DC7F) and their textual notations.</li>
                    <li><strong>Delimited Payloads:</strong> Recognizes messages encapsulated by known or custom delimiter patterns.</li>
                </ol>
                <p><strong>Decoding Process:</strong> Extracts steganographic characters/sequences, normalizes them (e.g., converts notation to actual characters), applies necessary offsets (0xE0000 or 0xDC00), and converts to ASCII.</p>
            </div>
            <h2><i class="fas fa-external-link-alt"></i>Further Unicode Resources</h2>
            <ul class="resources-list">
                <li><a href="https://www.branah.com/unicode-converter" target="_blank" rel="noopener noreferrer">Branah.com Unicode Converter</a></li>
                <li><a href="https://www.fileformat.info/info/unicode/char/search.htm" target="_blank" rel="noopener noreferrer">FileFormat.Info Unicode Character Search</a></li>
                <li><a href="https://unicode-table.com/" target="_blank" rel="noopener noreferrer">Unicode Character Table</a></li>
                <li><a href="https://home.unicode.org/" target="_blank" rel="noopener noreferrer">The Unicode Consortium</a></li>
            </ul>
        </section>

        <section id="encoder-section" class="section">
            <div class="info-panel">
                <div class="terminal-line">MODULE: Unicode Message Encoder activated.</div>
                <div class="terminal-line">MODE: High-Stealth Payload Generation.</div>
                <div class="terminal-line" id="encoderStatus">STATUS: <span class="cursor">Ready for Configuration</span></div>
            </div>
            <div class="panel">
                <h2><span class="step-number">01</span><i class="fas fa-keyboard"></i>Input Secret Payload (ASCII)</h2>
                <textarea id="messageToEncodeMain" placeholder="Enter your secret ASCII message here...">Hello world! This is a secret message hidden with Glyph Suite.</textarea>
            </div>
            <div class="panel">
                <h2><span class="step-number">02</span><i class="fas fa-cogs"></i>Select Encoding Vector</h2>
                <select id="encodingMethodMain" onchange="showMethodInfo()">
                    <option value="actual_surrogates">PHANTOM_MODE [Invisible Surrogates - Max Stealth]</option>
                    <option value="decorated">MARKED_PAYLOAD [Invisible + Delimiters - Recommended]</option>
                    <option value="tag_chars">UNICODE_TAG [U+E0xxx Notation - Visible Debug]</option>
                    <option value="surrogate_pairs_notation">SURROGATE_PAIR [Notation - Visible Debug]</option>
                </select>
                <div id="actualSurrogatesInfo" class="method-info">
                    <p><strong>PHANTOM_MODE [Invisible Surrogates]</strong></p>
                    <p>Encodes each ASCII character into an actual UTF-16 surrogate pair (e.g., U+DB40 U+DCxx). These pairs are typically rendered as invisible or zero-width characters.</p>
                    <p><strong>Stealth Level:</strong> Maximum. <strong>Use Case:</strong> Highest level of concealment.</p>
                </div>
                <div id="decoratedInfo" class="method-info">
                    <p><strong>MARKED_PAYLOAD [Invisible + Delimiters]</strong></p>
                    <p>Combines invisible surrogate pairs with visible start/end delimiters for robust extraction.</p>
                    <p><strong>Stealth Level:</strong> High. <strong>Use Case:</strong> Recommended for balance of stealth and robustness.</p>
                </div>
                <div id="tagCharsInfo" class="method-info">
                    <p><strong>UNICODE_TAG [U+E0xxx Notation]</strong></p>
                    <p>Encodes each ASCII character as a textual representation (e.g., 'A' becomes "U+E0041"). Primarily for debugging.</p>
                    <p><strong>Stealth Level:</strong> Low. <strong>Use Case:</strong> Understanding mapping, testing.</p>
                </div>
                <div id="surrogatePairsInfo" class="method-info">
                    <p><strong>SURROGATE_PAIR [Notation]</strong></p>
                    <p>Represents ASCII characters using textual notation for UTF-16 surrogate pairs. Visible, for technical insight.</p>
                    <p><strong>Stealth Level:</strong> Low. <strong>Use Case:</strong> Demonstrating UTF-16 representation.</p>
                </div>
            </div>
             <div id="delimiterOptionsMain" class="panel hidden">
                <h2><span class="step-number">2A</span><i class="fas fa-palette"></i>Delimiter Options (for Marked Payload)</h2>
                <p>Choose from preset delimiter combinations or create your own:</p>
                <div class="delimiter-presets-container" id="delimiterPresetsMain"></div>
                <label style="display: block; margin-top: 15px;">
                    <input type="checkbox" id="customDelimitersCheckMain" style="margin-right: 5px;"> Use custom delimiters
                </label>
                <div id="customDelimitersMain" class="custom-delimiters-group hidden">
                    <input type="text" id="openingDelimiterMain" placeholder="Opening Delimiter (e.g., ⚗)" maxlength="10">
                    <input type="text" id="closingDelimiterMain" placeholder="Closing Delimiter (e.g., ⚗)" maxlength="10">
                </div>
            </div>
            <div class="panel">
                <h2><span class="step-number">03</span><i class="fas fa-magic"></i>Generate & Retrieve Encoded Message</h2>
                <button id="encodeBtnMain"><i class="fas fa-atom"></i>Encode Payload</button>
                <button id="copyEncodedBtnMain" disabled><i class="fas fa-copy"></i>Copy to Clipboard</button>
            </div>
            <h3><i class="fas fa-code"></i>Steganographic Output</h3>
            <div id="encodedMessageMain" class="result">// Your encoded message will appear here.</div>
        </section>

        <footer class="footer">
            <p>&copy; <span id="currentYear"></span> GlyphSuite.com. All rights reserved.</p>
            <p>Advanced Unicode Steganography Tools for Digital Privacy & Covert Communication.</p>
            <p><a href="#home-section" onclick="showSection('home-section'); document.getElementById('homeLink').click();">Home</a> | <a href="https://github.com/Riley-Coyote/glyph" target="_blank" rel="noopener noreferrer">GitHub</a></p>
        </footer>
    </div>
    
    <script>
        const specialCharacters = {
            '\u200B': { name: 'ZERO WIDTH SPACE', category: 'Invisible Separator' }, '\u200C': { name: 'ZERO WIDTH NON-JOINER', category: 'Invisible Separator' },
            '\u200D': { name: 'ZERO WIDTH JOINER', category: 'Invisible Separator' }, '\uFEFF': { name: 'ZERO WIDTH NO-BREAK SPACE (BOM)', category: 'Invisible Separator' },
            '\u00AD': { name: 'SOFT HYPHEN', category: 'Special Punctuation' }, '\u2060': { name: 'WORD JOINER', category: 'Special Punctuation' },
            '\u0009': { name: 'HORIZONTAL TAB', category: 'Whitespace' }, '\u000A': { name: 'LINE FEED', category: 'Whitespace' },
            '\u000D': { name: 'CARRIAGE RETURN', category: 'Whitespace' }, '\u0020': { name: 'SPACE', category: 'Whitespace' },
            '\u00A0': { name: 'NO-BREAK SPACE', category: 'Whitespace' }, '\u3000': { name: 'IDEOGRAPHIC SPACE', category: 'Whitespace' },
            '\u0000': { name: 'NULL', category: 'Control' }, '\u007F': { name: 'DELETE', category: 'Control' }
        };

        const delimiterPresets = [
            { name: "Alchemical Basic", opening: "⚗", closing: "⚗" }, { name: "Elements", opening: "🜄", closing: "🜁" },
            { name: "Atomic", opening: "⚛", closing: "⚛" }, { name: "Quantum Wave", opening: "Ψ", closing: "Ψ" },
            { name: "Quantum Brackets", opening: "⟨", closing: "⟩" }, { name: "Glyph Default", opening: "⊰•-✧-•⦑", closing: "⦒•-✧-•⊱" },
            { name: "Stars", opening: "✧", closing: "✧" }, { name: "Circles", opening: "◎", closing: "◎"}
        ];
        let selectedDelimiters = { 
            quick: { ...delimiterPresets[5] }, 
            main: { ...delimiterPresets[5] }
        };

        let currentSection = 'home-section'; 

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            document.querySelectorAll('.nav-links a').forEach(link => link.classList.remove('active'));
            const activeNavLink = document.getElementById(sectionId.replace('-section', 'Link'));
            if (activeNavLink) activeNavLink.classList.add('active');
            
            currentSection = sectionId; // Update current section tracker

            const tagLine = document.getElementById('tagLine');
            if (sectionId === 'home-section') tagLine.textContent = "// Official Unicode Toolkit v4.1";
            else if (sectionId === 'analyzer-section') tagLine.textContent = "// Analysis & Detection Module v4.1";
            else if (sectionId === 'encoder-section') tagLine.textContent = "// Payload Generation Engine v4.1";
        }
        
        const matrixCanvas = document.getElementById('matrixCanvas');
        const matrixCtx = matrixCanvas.getContext('2d');
        let matrixAnimationFrameId;

        function setupMatrix() {
            if (matrixAnimationFrameId) cancelAnimationFrame(matrixAnimationFrameId);
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            const chars = "01"; const fontSize = 15;
            const columns = Math.floor(matrixCanvas.width / fontSize);
            const drops = Array(columns).fill(1).map(() => Math.floor(Math.random() * (matrixCanvas.height/fontSize) * -1 - 20));

            function drawMatrix() {
                matrixCtx.fillStyle = "rgba(10, 10, 18, 0.05)"; 
                matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
                matrixCtx.fillStyle = "rgba(249, 115, 22, 0.07)"; // Amber matrix
                matrixCtx.font = `${fontSize}px 'Share Tech Mono'`;
                for (let i = 0; i < drops.length; i++) {
                    const text = chars[Math.floor(Math.random() * chars.length)];
                    matrixCtx.fillText(text, i * fontSize, drops[i] * fontSize);
                    if (drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) drops[i] = 0;
                    drops[i]++;
                }
                matrixAnimationFrameId = requestAnimationFrame(drawMatrix);
            }
            drawMatrix();
        }
        
        window.addEventListener('resize', setupMatrix);
        
        function analyzeText() {
            const text = document.getElementById('analyzerInputText').value;
            const resultDiv = document.getElementById('analysisResult');
            const statsDiv = document.getElementById('statsResult');
            const charInfoListDiv = document.getElementById('charInfoList');

            if (!text) {
                resultDiv.innerHTML = '<p>Please input text for analysis.</p>';
                statsDiv.innerHTML = ''; charInfoListDiv.innerHTML = ''; return;
            }
            
            let htmlResult = ''; let charCount = 0, specialCharCount = 0, whitespaceCount = 0, controlCharCount = 0;
            const foundSpecialCharsMap = new Map();
            
            for (let i = 0; i < text.length; i++) {
                const char = text.charAt(i); 
                const codePoint = text.codePointAt(i); 
                
                charCount++;
                let charDisplay = escapeHTML(char);
                let charClasses = 'char-info-item';
                let tooltipText = `Char: '${charDisplay}' Dec: ${codePoint} Hex: U+${codePoint.toString(16).toUpperCase().padStart(4, '0')}`;
                let asciiMapping = '';

                if (codePoint >= 0xE0000 && codePoint <= 0xE007F) { 
                    charClasses += ' special';
                    const mappedAscii = String.fromCharCode(codePoint - 0xE0000);
                    tooltipText = `Unicode Tag: U+${codePoint.toString(16).toUpperCase()} -> ASCII '${escapeHTML(mappedAscii)}' (${codePoint - 0xE0000})`;
                    asciiMapping = ` <span class="ascii-mapping">→ '${escapeHTML(mappedAscii)}'</span>`;
                    if (!foundSpecialCharsMap.has(charDisplay)) foundSpecialCharsMap.set(charDisplay, { name: `Unicode Tag (${charDisplay})`, category: 'Steganographic Tag', code: `U+${codePoint.toString(16).toUpperCase()}`, count: 0, ascii: mappedAscii });
                    foundSpecialCharsMap.get(charDisplay).count++;
                    specialCharCount++;
                } else if (i + 1 < text.length && text.charCodeAt(i) === 0xDB40 && text.charCodeAt(i+1) >= 0xDC00 && text.charCodeAt(i+1) <= 0xDC7F) { 
                     charClasses += ' special';
                     const lowSurrogate = text.charCodeAt(i+1);
                     const mappedAscii = String.fromCharCode(lowSurrogate - 0xDC00);
                     charDisplay = escapeHTML(text.substring(i, i+2));
                     tooltipText = `Surrogate Tag Pair: U+DB40 U+${lowSurrogate.toString(16).toUpperCase()} -> ASCII '${escapeHTML(mappedAscii)}' (${lowSurrogate - 0xDC00})`;
                     asciiMapping = ` <span class="ascii-mapping">→ '${escapeHTML(mappedAscii)}'</span>`;
                     if (!foundSpecialCharsMap.has(charDisplay)) foundSpecialCharsMap.set(charDisplay, { name: `Surrogate Tag Pair (${charDisplay})`, category: 'Steganographic Surrogate', code: `U+DB40 U+${lowSurrogate.toString(16).toUpperCase()}`, count: 0, ascii: mappedAscii });
                     foundSpecialCharsMap.get(charDisplay).count++;
                     specialCharCount++;
                     i++; 
                } else if (specialCharacters[char]) {
                    charClasses += ' special';
                    const info = specialCharacters[char];
                    tooltipText = `${info.name} (U+${codePoint.toString(16).toUpperCase()}) Category: ${info.category}`;
                    if (!foundSpecialCharsMap.has(charDisplay)) foundSpecialCharsMap.set(charDisplay, { ...info, code: `U+${codePoint.toString(16).toUpperCase()}`, count: 0 });
                    foundSpecialCharsMap.get(charDisplay).count++;
                    specialCharCount++;
                } else if (codePoint < 32 || codePoint === 127) {
                    controlCharCount++; charDisplay = `[CTRL:${codePoint.toString(16).toUpperCase().padStart(2,'0')}]`;
                    tooltipText = `Control Character (U+${codePoint.toString(16).toUpperCase()})`;
                } else if (/\s/.test(char)) {
                    whitespaceCount++;
                    if(char !== ' ') { charDisplay = `[WS:${codePoint.toString(16).toUpperCase().padStart(2,'0')}]`; tooltipText = `Whitespace (U+${codePoint.toString(16).toUpperCase()})`;}
                }
                
                htmlResult += `<span class="${charClasses}" title="${tooltipText}">${charDisplay}<span class="tooltip">${tooltipText}</span></span>`;
                htmlResult += `<span class="char-code">U+${codePoint.toString(16).toUpperCase().padStart(4, '0')}${asciiMapping}</span>`;
                if (codePoint > 0xFFFF && !(text.charCodeAt(i-1) === 0xDB40 && codePoint >= 0xDC00 && codePoint <= 0xDFFF && charClasses.includes('special'))) {
                }
            }
            
            statsDiv.innerHTML = `
                <div class="terminal-line">Total Characters: ${charCount}</div>
                <div class="terminal-line">Identified Special Chars: ${specialCharCount}</div>
                <div class="terminal-line">Control Characters: ${controlCharCount}</div>
                <div class="terminal-line">Whitespace Characters: ${whitespaceCount}</div>
                <div class="terminal-line">Analysis Status: Complete</div>`;
            
            resultDiv.innerHTML = htmlResult || '// No text analyzed.';
            
            let charInfoListHTML = '';
            if (foundSpecialCharsMap.size > 0) {
                charInfoListHTML = '<ul style="list-style-type: none; padding-left: 5px;">';
                foundSpecialCharsMap.forEach((info, displayChar) => {
                    charInfoListHTML += `
                        <li style="margin-bottom: 10px; position: relative; padding-left: 30px;">
                            <span style="position: absolute; left: 0; color:var(--highlight-color);">⦿</span>
                            <strong>${info.code}</strong> (${escapeHTML(displayChar)}): ${info.name} 
                            <span class="category-label">${info.category}</span> - Count: ${info.count}
                            ${info.ascii ? ` <span class="ascii-mapping">→ '${escapeHTML(info.ascii)}'</span>` : ''}
                        </li>`;
                });
                charInfoListHTML += '</ul>';
            } else {
                charInfoListHTML = '<div class="terminal-line">No specific special characters from the known list were detected.</div>';
            }
            charInfoListDiv.innerHTML = charInfoListHTML;
            updateAnalyzerStatus("Analysis complete. Ready for new input or message extraction.");
        }

        function unifiedStegoDecode(text) {
            let messages = [];
            let tagCharsMessage = "";
            let surrogatePairsMessage = "";
            let decoratedMessages = new Map(); 

            for (let i = 0; i < text.length; i++) {
                const code = text.codePointAt(i);
                if (code >= 0xE0000 && code <= 0xE007F) {
                    tagCharsMessage += String.fromCharCode(code - 0xE0000);
                }
                if (code > 0xFFFF) i++; 
            }
            if (tagCharsMessage) messages.push({ type: "Unicode Tag Characters (Actual)", message: tagCharsMessage });

            for (let i = 0; i < text.length - 1; i++) {
                const high = text.charCodeAt(i); const low = text.charCodeAt(i + 1);
                if (high === 0xDB40 && low >= 0xDC00 && low <= 0xDC7F) {
                    surrogatePairsMessage += String.fromCharCode(low - 0xDC00);
                    i++; 
                }
            }
            if (surrogatePairsMessage && !messages.some(m => m.type.includes("Surrogate") && m.message === surrogatePairsMessage)) {
                 messages.push({ type: "Surrogate Pairs (Actual)", message: surrogatePairsMessage });
            }
            
            let tagNotationMessage = "";
            const tagNotationPattern = /U\+E00([0-7][0-9A-Fa-f])/gi;
            let match;
            while ((match = tagNotationPattern.exec(text)) !== null) {
                tagNotationMessage += String.fromCharCode(parseInt(match[1], 16));
            }
            if (tagNotationMessage) messages.push({ type: "Unicode Tag Characters (Notation U+E00xx)", message: tagNotationMessage });

            let surrogateNotationMessage = "";
            const surrogateNotationPattern = /(?:U\+DB40\s+U\+DC([0-7][0-9A-Fa-f])|56128\|\s*U\+DB40\s+\d+\|\s*U\+DC([0-7][0-9A-Fa-f]))/gi;
            while ((match = surrogateNotationPattern.exec(text)) !== null) {
                 const hexVal = match[1] || match[2];
                 if (hexVal) surrogateNotationMessage += String.fromCharCode(parseInt(hexVal, 16));
            }
            if (surrogateNotationMessage) messages.push({ type: "Surrogate Pairs (Notation)", message: surrogateNotationMessage });
            
            const allDelimitersToTry = [...delimiterPresets];
            const customCheckQuick = document.getElementById('customDelimitersCheckQuick');
            if (customCheckQuick && customCheckQuick.checked) {
                allDelimitersToTry.push({
                    name: "Custom (Analyzer)",
                    opening: document.getElementById('openingDelimiterQuick').value,
                    closing: document.getElementById('closingDelimiterQuick').value
                });
            }
            const customCheckMain = document.getElementById('customDelimitersCheckMain');
             if (customCheckMain && customCheckMain.checked) {
                allDelimitersToTry.push({
                    name: "Custom (Encoder)",
                    opening: document.getElementById('openingDelimiterMain').value,
                    closing: document.getElementById('closingDelimiterMain').value
                });
            }
            
            allDelimitersToTry.forEach(del => {
                if (del.opening && del.closing && del.opening.length > 0 && del.closing.length > 0) { 
                    try {
                        const regex = new RegExp(escapeRegex(del.opening) + "([\\s\\S]*?)" + escapeRegex(del.closing), "g");
                        let decoratedMatch;
                        let currentDecoratedMsg = "";
                        while((decoratedMatch = regex.exec(text)) !== null) {
                            const innerContent = decoratedMatch[1];
                            for (let k = 0; k < innerContent.length - 1; k++) {
                                const high = innerContent.charCodeAt(k); const low = innerContent.charCodeAt(k + 1);
                                if (high === 0xDB40 && low >= 0xDC00 && low <= 0xDC7F) {
                                    currentDecoratedMsg += String.fromCharCode(low - 0xDC00);
                                    k++;
                                }
                            }
                        }
                        if (currentDecoratedMsg) {
                             const key = `${del.opening}...${del.closing}`;
                             if (!decoratedMessages.has(key) || decoratedMessages.get(key).length < currentDecoratedMsg.length) {
                                 decoratedMessages.set(key, currentDecoratedMsg);
                             }
                        }
                    } catch (e) { console.warn("Regex error for delimiter:", del, e); }
                }
            });
            decoratedMessages.forEach((msg, key) => {
                messages.push({ type: `Decorated Payload (${escapeHTML(key)})`, message: msg });
            });
            
            const uniqueMessages = [];
            const seenMessages = new Set();
            for (const msgObj of messages) {
                if (msgObj.message && !seenMessages.has(msgObj.message)) { 
                    uniqueMessages.push(msgObj);
                    seenMessages.add(msgObj.message);
                } else if (msgObj.message) { 
                    const existing = uniqueMessages.find(um => um.message === msgObj.message);
                    if (existing && msgObj.type.includes("Decorated") && !existing.type.includes("Decorated")) {
                        existing.type = msgObj.type; 
                    }
                }
            }
            return uniqueMessages.filter(m => m.message.length > 0);
        }
        
        function extractMessages() { 
            const text = document.getElementById('analyzerInputText').value;
            const decodedMessageDiv = document.getElementById('decodedMessage');
            if (!text) {
                decodedMessageDiv.innerHTML = '<div class="terminal-line">ERROR: No text in input area to extract from.</div>';
                updateAnalyzerStatus("Extraction failed: No input text.", "error");
                return;
            }
            updateAnalyzerStatus("Extracting messages...", "info");
            const extracted = unifiedStegoDecode(text);
            if (extracted.length > 0) {
                let html = `<h3><i class="fas fa-archive"></i> Extracted Content (${extracted.length} result(s))</h3>`;
                extracted.forEach(res => {
                    html += `<div class="message-found"><div class="category">${escapeHTML(res.type)}</div><pre>${escapeHTML(res.message)}</pre></div>`;
                });
                decodedMessageDiv.innerHTML = html;
                updateAnalyzerStatus(`Extraction complete: ${extracted.length} potential message(s) found.`, "success");
            } else {
                decodedMessageDiv.innerHTML = '<div class="terminal-line">SCAN COMPLETE: No decodable hidden messages detected.</div>';
                updateAnalyzerStatus("Extraction complete: No hidden messages found.", "info");
            }
        }
        
        function clearAnalyzer() {
            document.getElementById('analyzerInputText').value = '';
            document.getElementById('analysisResult').innerHTML = '// Character-by-character breakdown will appear here.';
            document.getElementById('statsResult').innerHTML = '// Analysis statistics will be shown here.';
            document.getElementById('charInfoList').innerHTML = '// List of identified special Unicode characters.';
            document.getElementById('decodedMessage').innerHTML = '// Extracted message will appear here.';
            document.getElementById('messageToEncodeQuick').value = '';
            document.getElementById('encodedMessageQuick').innerHTML = '// Quick encoded output will appear here.';
            document.getElementById('copyEncodedBtnQuick').disabled = true;
            updateAnalyzerStatus("Analyzer cleared. Ready for new input.");
        }
        
        function escapeHTML(str) {
            if (typeof str !== 'string') return '';
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
        }
        function escapeRegex(string) { return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

        function performEncoding(message, method) {
            let openDel, closeDel;
            const sourcePrefix = currentSection === 'analyzer-section' ? 'Quick' : 'Main';
            
            if (method === 'decorated') {
                const customCheck = document.getElementById(`customDelimitersCheck${sourcePrefix}`);
                if (customCheck && customCheck.checked) {
                    openDel = document.getElementById(`openingDelimiter${sourcePrefix}`).value;
                    closeDel = document.getElementById(`closingDelimiter${sourcePrefix}`).value;
                } else { 
                    const delStore = sourcePrefix === 'Quick' ? selectedDelimiters.quick : selectedDelimiters.main;
                    openDel = delStore.opening;
                    closeDel = delStore.closing;
                }
            }
            
            switch (method) {
                case 'tag_chars': return encodeWithTagChars(message);
                case 'surrogate_pairs_notation': return encodeWithSurrogatePairNotation(message);
                case 'actual_surrogates': return encodeWithActualSurrogates(message);
                case 'decorated': return encodeWithDecoration(message, openDel, closeDel);
                default: return "Error: Unknown encoding method.";
            }
        }

        function encodeMessageQuick() {
            const message = document.getElementById('messageToEncodeQuick').value;
            const encodingMethod = document.getElementById('encodingMethodQuick').value;
            const encodedMessageDiv = document.getElementById('encodedMessageQuick');
            const copyBtn = document.getElementById('copyEncodedBtnQuick');
            if (!message) {
                encodedMessageDiv.innerHTML = '<div class="terminal-line" style="color:var(--error-color);">ERROR: No payload for Quick Encode.</div>';
                copyBtn.disabled = true; return;
            }
            const encodedText = performEncoding(message, encodingMethod);
            encodedMessageDiv.innerHTML = `<div class="terminal-line" style="color:var(--success-color);">ENCODING COMPLETE [${getEncodingMethodDescription(encodingMethod)}]</div>
                                          <pre style="margin-top: 10px;">${escapeHTML(encodedText)}</pre>`;
            copyBtn.disabled = false;
            updateAnalyzerStatus("Quick Encode complete.", "success");
        }

        function encodeMessageMain() {
            const message = document.getElementById('messageToEncodeMain').value;
            const encodingMethod = document.getElementById('encodingMethodMain').value;
            const encodedMessageDiv = document.getElementById('encodedMessageMain');
            const copyBtn = document.getElementById('copyEncodedBtnMain');
            if (!message) {
                encodedMessageDiv.textContent = 'ERROR: No payload. Enter message to encode.';
                copyBtn.disabled = true; 
                updateEncoderStatus("Encoding failed: No payload.", "error"); return;
            }
            const encodedText = performEncoding(message, encodingMethod);
            encodedMessageDiv.textContent = encodedText;
            copyBtn.disabled = false;
            updateEncoderStatus(`Encoding complete using ${getEncodingMethodDescription(encodingMethod)}. Output ready.`, "success");
        }
        
        function encodeWithTagChars(message) { 
            return Array.from(message).map((char, i) => {
                const code = char.charCodeAt(0);
                return code < 128 ? `U+E00${code.toString(16).padStart(2, '0').toUpperCase()}` + (((i + 1) % 8 === 0 && i < message.length -1) ? '\n' : ' ') : char;
            }).join('').trim();
        }
        function encodeWithSurrogatePairNotation(message) { 
            return Array.from(message).map((char, i) => {
                const code = char.charCodeAt(0);
                if (code < 128) {
                    const lowSurrogateHex = code.toString(16).padStart(2, '0').toUpperCase();
                    return `U+DB40 U+DC${lowSurrogateHex}` + (((i + 1) % 3 === 0 && i < message.length -1) ? '\n' : ' ');
                }
                return char + ' ';
            }).join('').trim();
        }
        function encodeWithActualSurrogates(message) { 
            return Array.from(message).map(char => {
                const code = char.charCodeAt(0);
                return code < 128 ? String.fromCharCode(0xDB40, 0xDC00 + code) : char;
            }).join('');
        }
        function encodeWithDecoration(message, opening, closing) {
            const surrogateEncoded = encodeWithActualSurrogates(message);
            return `${opening}${surrogateEncoded}${closing}`;
        }
        
        function copyToClipboard(elementId, isOutputInPre = false) {
            const targetElement = document.getElementById(elementId);
            let textToCopy = '';
            let feedbackAnchor = targetElement.closest('.panel') || targetElement.parentNode; 

            if (isOutputInPre && targetElement && targetElement.querySelector('pre')) {
                textToCopy = targetElement.querySelector('pre').textContent;
            } else if (targetElement) {
                textToCopy = targetElement.textContent;
                 if (targetElement.tagName === 'TEXTAREA') textToCopy = targetElement.value;
            }

            if (!textToCopy || textToCopy.startsWith('ERROR:') || textToCopy.includes("will appear here")) {
                showTemporaryMessage(feedbackAnchor, targetElement, 'Nothing valid to copy.', 'error'); return;
            }
            navigator.clipboard.writeText(textToCopy).then(() => {
                showTemporaryMessage(feedbackAnchor, targetElement, 'Payload copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showTemporaryMessage(feedbackAnchor, targetElement, 'Failed to copy. Check console.', 'error');
            });
        }

        function showTemporaryMessage(anchorElement, referenceElement, message, type = 'success') {
            const messageDiv = document.createElement('div');
            messageDiv.className = `feedback-message ${type}`;
            messageDiv.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-times-circle'}"></i> ${escapeHTML(message)}`;
            anchorElement.insertBefore(messageDiv, referenceElement.nextSibling);
            setTimeout(() => messageDiv.remove(), 3000);
        }
        
        function getEncodingMethodDescription(method) {
            const descriptions = {
                'tag_chars': 'UNICODE_TAG Notation', 'surrogate_pairs_notation': 'SURROGATE_PAIR Notation',
                'actual_surrogates': 'PHANTOM_MODE (Invisible)', 'decorated': 'MARKED_PAYLOAD (Delimited)'
            };
            return descriptions[method] || method;
        }
        
        function switchAnalyzerTab(tabId) {
            document.querySelectorAll('#analyzer-section .tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('#analyzer-section .tab-btn').forEach(button => button.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.getElementById(tabId === 'encodeTabQuick' ? 'encodeTabBtnQuick' : 'decodeTabBtn').classList.add('active');
        }
        
        function showMethodInfo() { 
            const method = document.getElementById('encodingMethodMain').value;
            document.querySelectorAll('#encoder-section .method-info').forEach(div => div.style.display = 'none');
            const delimiterOptionsDiv = document.getElementById('delimiterOptionsMain');
            
            const infoDivId = {
                'tag_chars': 'tagCharsInfo', 'surrogate_pairs_notation': 'surrogatePairsInfo',
                'actual_surrogates': 'actualSurrogatesInfo', 'decorated': 'decoratedInfo'
            }[method];
            
            if (infoDivId && document.getElementById(infoDivId)) document.getElementById(infoDivId).style.display = 'block';
            if (delimiterOptionsDiv) delimiterOptionsDiv.classList.toggle('hidden', method !== 'decorated');
        }

        function loadSampleText() {
            const sample = `This is a sample​ text with\u200B zero-width\u200C spaces\u200D and\u00A0non-breaking\u2002spaces.
It also includes some\ttabs and\rcarriage returns.
Example 1 (Tag Notation): U+E0048 U+E0065 U+E006C U+E006C U+E006F
Example 2 (Invisible Surrogates): ⊰•-✧-•⦑󠁈󠁥󠁬󠁬󠁯󠀠󠁗󠁯󠁲󠁬󠁤󠀡⦒•-✧-•⊱
Example 3 (Surrogate Notation): U+DB40 U+DC48 U+DB40 U+DC65 U+DB40 U+DC6C`; 
            document.getElementById('analyzerInputText').value = sample;
            updateAnalyzerStatus("Sample text loaded. Ready for analysis.");
        }

        function updateAnalyzerStatus(message, type = "info") {
            const statusEl = document.getElementById('analyzerStatus');
            let colorVar = 'var(--text-color)';
            if (type === 'success') colorVar = 'var(--success-color)';
            else if (type === 'error') colorVar = 'var(--error-color)';
            statusEl.innerHTML = `STATUS: <span style="color:${colorVar};">${escapeHTML(message)}</span> <span class="cursor"></span>`;
        }
        function updateEncoderStatus(message, type = "info") {
            const statusEl = document.getElementById('encoderStatus');
            let colorVar = 'var(--text-color)';
            if (type === 'success') colorVar = 'var(--success-color)';
            else if (type === 'error') colorVar = 'var(--error-color)';
            statusEl.innerHTML = `STATUS: <span style="color:${colorVar};">${escapeHTML(message)}</span> <span class="cursor"></span>`;
        }

        function setupDelimiterOptions(containerId, checkId, customGroupId, openId, closeId, typeSuffix) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = ''; 
            delimiterPresets.forEach((preset) => {
                const btn = document.createElement('button');
                btn.className = 'delimiter-preset-btn';
                btn.innerHTML = `<span class="symbols">${preset.opening}...${preset.closing}</span> <span class="name">${preset.name}</span>`;
                btn.onclick = () => {
                    document.getElementById(checkId).checked = false;
                    document.getElementById(customGroupId).classList.add('hidden');
                    document.querySelectorAll(`#${containerId} .delimiter-preset-btn`).forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    selectedDelimiters[typeSuffix] = preset;
                };
                if (JSON.stringify(selectedDelimiters[typeSuffix]) === JSON.stringify(preset) && !document.getElementById(checkId).checked) {
                    btn.classList.add('selected');
                }
                container.appendChild(btn);
            });

            const customCheckElement = document.getElementById(checkId);
            customCheckElement.onchange = function() {
                document.getElementById(customGroupId).classList.toggle('hidden', !this.checked);
                if (this.checked) {
                    document.querySelectorAll(`#${containerId} .delimiter-preset-btn`).forEach(b => b.classList.remove('selected'));
                    selectedDelimiters[typeSuffix] = { 
                        opening: document.getElementById(openId).value,
                        closing: document.getElementById(closeId).value
                    };
                } else { 
                    const firstPresetBtn = container.querySelector('.delimiter-preset-btn');
                    if (firstPresetBtn) firstPresetBtn.click(); else selectedDelimiters[typeSuffix] = delimiterPresets[5]; // Fallback
                }
            };
            document.getElementById(customGroupId).classList.toggle('hidden', !customCheckElement.checked);

            const openInput = document.getElementById(openId);
            const closeInput = document.getElementById(closeId);
            if (openInput && !openInput.value) openInput.value = delimiterPresets[5].opening;
            if (closeInput && !closeInput.value) closeInput.value = delimiterPresets[5].closing;
            
            openInput.oninput = () => { if(customCheckElement.checked) selectedDelimiters[typeSuffix].opening = openInput.value; };
            closeInput.oninput = () => { if(customCheckElement.checked) selectedDelimiters[typeSuffix].closing = closeInput.value; };
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            setupMatrix();
            showSection('home-section'); 
            
            document.getElementById('analyzerInputText').value = ''; 
            document.getElementById('messageToEncodeMain').value = 'Hello world! This is a secret message hidden with Glyph Suite.';

            document.getElementById('analyzeBtn').addEventListener('click', analyzeText);
            document.getElementById('loadSampleBtn').addEventListener('click', loadSampleText);
            document.getElementById('clearAnalyzerBtn').addEventListener('click', clearAnalyzer);
            document.getElementById('extractBtn').addEventListener('click', extractMessages);
            document.getElementById('encodeBtnQuick').addEventListener('click', encodeMessageQuick);
            document.getElementById('copyEncodedBtnQuick').addEventListener('click', () => copyToClipboard('encodedMessageQuick', true));
            
            const encodingMethodQuickSelect = document.getElementById('encodingMethodQuick');
            encodingMethodQuickSelect.onchange = () => {
                document.getElementById('delimiterOptionsQuick').classList.toggle('hidden', encodingMethodQuickSelect.value !== 'decorated');
            };
            setupDelimiterOptions('delimiterPresetsQuick', 'customDelimitersCheckQuick', 'customDelimitersQuick', 'openingDelimiterQuick', 'closingDelimiterQuick', 'quick');
            document.getElementById('delimiterOptionsQuick').classList.add('hidden');

            document.getElementById('encodeBtnMain').addEventListener('click', encodeMessageMain);
            document.getElementById('copyEncodedBtnMain').addEventListener('click', () => copyToClipboard('encodedMessageMain'));
            document.getElementById('encodingMethodMain').onchange = showMethodInfo; 
            setupDelimiterOptions('delimiterPresetsMain', 'customDelimitersCheckMain', 'customDelimitersMain', 'openingDelimiterMain', 'closingDelimiterMain', 'main');
            
            showMethodInfo(); 
            encodeMessageMain(); 
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        });
    </script>
</body>
</html>
